# kanji-dictionary

小学生で習う漢字（1〜6年生）を一覧・検索できる軽量な静的ウェブアプリケーションです。kanji.csv をクライアント側で読み込み、HTML/CSS/Vanilla JavaScript で動作します。画像からの文字認識には Tesseract.js を利用しています（home.html に CDN 経由で読み込みあり）。

## 主要機能
- 学年別（1〜6年）に漢字一覧を表示
- 検索欄に漢字を1文字入力して検索（Enter）
- 漢字をクリックすると詳細（音読み・訓読み・部首・画数・熟語・ふりがな）を表示
- 画像アップロードによる OCR（Tesseract.js）で画像中の文字を抽出して検索に利用

## ファイル構成（主要）
- home.html — UI（検索・学年別一覧・画像アップロード）
- csv.js — kanji.csv を fetch してパース、学年ごとに一覧を生成する処理（グローバル変数 kanjiData を構築）
- word.js — 画像処理・OCR などの追加ロジック（モジュールとして読み込み）
- kanji.csv — 漢字データ（CSV）
- test.css — スタイル
- .vscode/ — 開発用のエディタ設定（任意）

## CSV の列仕様
csv.js の実装に基づく列順（インデックス）:
0. 音読み
1. 訓読み
2. 内容（漢字）
3. 部首
4. 画数
5. 熟語
6. 熟語ふりがな

例（1行）:
音読み,訓読み,内容,部首,画数,熟語,熟語ふりがな
オン,くん,漢,さんずい,13,漢字,かんじ

注意: kanji.csv は UTF-8 を想定しています。行末の空行は csv.js によって除外されます。

## ローカルでの実行（推奨）
1. リポジトリをクローンまたはダウンロード
2. 簡易サーバを起動（ブラウザのローカルファイル制約を回避するため）
   - Python 3 の場合:
     - python -m http.server 8000
     - ブラウザで https://nato-git.github.io/kanji-dictionary/home を開く
   - Node.js の場合は http-server 等を利用

直接 home.html をファイルとして開くこともできますが、多くのブラウザで fetch によるローカル CSV 読み込みがブロックされるため、上記のローカルサーバ方式を推奨します。

## 使い方（画面操作）
- 検索: ページ上部の入力欄に漢字を1文字入力して Enter を押します。該当があれば結果が表示され、クリックで詳細へ遷移します。
- 学年一覧: 各学年（1〜6年）のセクションから漢字を直接クリックできます。
- 画像から検索: 画像をアップロードすると Tesseract.js（home.html で unpkg の v6.0.1 を使用）で文字を抽出し、抽出結果を検索に使います。

## 開発メモ
- csv.js:
  - fetch('kanji.csv') で CSV を取得し、行を split('\n')、カンマ区切りでパースして kanjiData を生成します。
  - 学年ごとの境界は csv.js 内のインデックス範囲（例: 0〜80 が 1年生など）に依存します。データ行数や学年境界を変更する場合は csv.js を修正してください。
  - kanjiButton(i) は選択した漢字の詳細を表示する関数で、現在は document.body.innerHTML を置き換えます。
- word.js:
  - モジュールとして読み込まれ、画像入力（#image_zone）や OCR の処理を行っています。詳細は該当ファイルを参照してください。
